{"ast":null,"code":"import _toConsumableArray from\"/Users/wjz8597/OnlineSharedAlbum/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/wjz8597/OnlineSharedAlbum/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Container,Grow,Grid,Paper,AppBar,TextField,Button}from'@material-ui/core';import Posts from'../Posts/Posts.js';import Form from'../Form/Form.js';import{useDispatch}from'react-redux';import Pagination from'../Pagination';import{getPostsBySearch}from'../../actions/posts';import{useHistory,useLocation}from'react-router-dom';import ChipInput from'material-ui-chip-input';import useStyles from'./styles.js';function useQuery(){return new URLSearchParams(useLocation().search);}var Home=function Home(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),currentId=_useState2[0],setCurrentId=_useState2[1];var dispatch=useDispatch();var query=useQuery();var history=useHistory();var page=query.get('page')||1;var searchQuery=query.get('searchQuery');var classes=useStyles();var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],setSearch=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),tags=_useState6[0],setTags=_useState6[1];// useEffect( () => {\n//   dispatch(getPosts());\n// }, [currentId, dispatch]);\n// classes = useStyles();\nvar searchPost=function searchPost(){if(search.trim()||tags){//distpatch -> fetch search post\ndispatch(getPostsBySearch({search:search,tags:tags.join(',')}));history.push(\"/posts/search?searchQuery=\".concat(search||'none',\"&tags=\").concat(tags.join(',')));}else{history.push('/');}};var handleKeyPress=function handleKeyPress(e){if(e.keyCode===13){// search post\nsearchPost();}};var handleAdd=function handleAdd(tag){return setTags([].concat(_toConsumableArray(tag),[tag]));};var handleDelete=function handleDelete(tagToDelete){return setTags(tags.filter(function(tag){return tag!==tagToDelete;}));};return/*#__PURE__*/React.createElement(Grow,{in:true},/*#__PURE__*/React.createElement(Container,{maxWidth:\"xl\"},/*#__PURE__*/React.createElement(Grid,{container:true,justifyContent:\"space-between\",alignItems:\"stretch\",spacing:3,className:classes.gridContainer},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:9},/*#__PURE__*/React.createElement(Posts,{setCurrentId:setCurrentId})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:3},/*#__PURE__*/React.createElement(AppBar,{className:classes.appBarSearch,position:\"static\",color:\"inherit\"},/*#__PURE__*/React.createElement(TextField,{name:\"search\",variant:\"outlined\",label:\"Search Texts\",onKeyDown:handleKeyPress,fullWidth:true,value:search,onChange:function onChange(e){return setSearch(e.target.value);}}),/*#__PURE__*/React.createElement(ChipInput,{style:{margin:'10px 0'},value:tags,onAdd:function onAdd(tag){return handleAdd(tag);},onDelete:function onDelete(tag){return handleDelete(tag);},label:\"Search Tags\",variant:\"outlined\"}),/*#__PURE__*/React.createElement(Button,{onClick:searchPost,className:classes.searchButton,variant:\"contained\",color:\"primary\"},\"Search\")),/*#__PURE__*/React.createElement(Form,{currentId:currentId,setCurrentId:setCurrentId}),!searchQuery&&!tags.length&&/*#__PURE__*/React.createElement(Paper,{className:classes.pagination,elevation:6},/*#__PURE__*/React.createElement(Pagination,{page:page}))))));};export default Home;","map":{"version":3,"names":["React","useState","Container","Grow","Grid","Paper","AppBar","TextField","Button","Posts","Form","useDispatch","Pagination","getPostsBySearch","useHistory","useLocation","ChipInput","useStyles","useQuery","URLSearchParams","search","Home","currentId","setCurrentId","dispatch","query","history","page","get","searchQuery","classes","setSearch","tags","setTags","searchPost","trim","join","push","handleKeyPress","e","keyCode","handleAdd","tag","handleDelete","tagToDelete","filter","gridContainer","appBarSearch","target","value","margin","searchButton","length","pagination"],"sources":["/Users/wjz8597/OnlineSharedAlbum/client/src/components/Home/Home.js"],"sourcesContent":["import React, {useState} from 'react';\nimport {Container, Grow, Grid, Paper, AppBar, TextField, Button} from '@material-ui/core';\nimport Posts from '../Posts/Posts.js';\nimport Form from '../Form/Form.js';\nimport { useDispatch } from 'react-redux';\nimport Pagination from '../Pagination';\nimport {getPostsBySearch} from '../../actions/posts';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport ChipInput from 'material-ui-chip-input';\nimport useStyles from './styles.js';\n\n\n\nfunction useQuery() {\n    return new URLSearchParams(useLocation().search);\n}\nconst Home = () => {\n    const [currentId, setCurrentId] = useState(0);\n    const dispatch = useDispatch();\n    const query = useQuery();\n    const history = useHistory();\n    const page = query.get('page') || 1;\n    const searchQuery = query.get('searchQuery');\n    const classes = useStyles();\n    const [search, setSearch] = useState('');\n    const [tags, setTags] = useState([]); \n    // useEffect( () => {\n    //   dispatch(getPosts());\n    // }, [currentId, dispatch]);\n    // classes = useStyles();\n\n    const searchPost = () => {\n        if (search.trim() || tags) {\n            //distpatch -> fetch search post\n            dispatch(getPostsBySearch({search, tags: tags.join(',')}));\n            history.push(`/posts/search?searchQuery=${search || 'none'}&tags=${tags.join(',')}`);\n        } else {\n            history.push('/');\n        }\n    }\n    const handleKeyPress = (e) => {\n        if (e.keyCode ===  13) {\n            // search post\n            searchPost();\n        }\n    }\n    const handleAdd = (tag) => setTags([...tag, tag]);\n    const handleDelete = (tagToDelete) => setTags(tags.filter((tag) => tag !== tagToDelete));\n    return (\n        <Grow in>\n            <Container maxWidth='xl'>\n                <Grid container justifyContent=\"space-between\" alignItems=\"stretch\" spacing={3} className={classes.gridContainer}>\n                    <Grid item xs={12} sm={6} md={9}>\n                        <Posts setCurrentId={setCurrentId}/>\n                    </Grid>\n                    <Grid item xs={12} sm={6} md={3}>\n                        <AppBar className={classes.appBarSearch} position=\"static\" color=\"inherit\">\n                            <TextField \n                            name=\"search\" \n                            variant=\"outlined\"\n                            label=\"Search Texts\"\n                            onKeyDown={handleKeyPress}\n                            fullWidth\n                            value={search}\n                            onChange={(e) => setSearch(e.target.value)}\n                            />\n                            <ChipInput \n                            style={{margin:'10px 0'}}\n                            value={tags}\n                            onAdd={(tag) => handleAdd(tag)}\n                            onDelete={(tag) => handleDelete(tag)}\n                            label=\"Search Tags\"\n                            variant=\"outlined\"></ChipInput>\n                            <Button onClick={searchPost} className={classes.searchButton} variant=\"contained\" color=\"primary\">\n                                Search \n                            </Button>\n                        </AppBar>\n                    \n                        <Form currentId={currentId} setCurrentId={setCurrentId}/> \n                        \n                        {(!searchQuery && !tags.length) && (\n                            <Paper className={classes.pagination} elevation={6}>\n                                <Pagination page={page} />\n                            </Paper>\n                        )}\n                    </Grid>\n                </Grid>\n            </Container>\n        </Grow>\n    );\n};\n\n\n\n\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module"}