{"ast":null,"code":"import _slicedToArray from\"/Users/wjz8597/OnlineSharedAlbum/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Link,useHistory,useLocation}from'react-router-dom';import{AppBar,Avatar,Button,Typography,Toolbar}from'@material-ui/core';import useStyles from'./styles.js';import decode from'jwt-decode';import{useDispatch}from'react-redux';import berkeley from'../../images/memories.png';var Navbar=function Navbar(){var classes=useStyles();var _useState=useState(JSON.parse(localStorage.getItem('profile'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var dispatch=useDispatch();var history=useHistory();var location=useLocation();var logout=function logout(){dispatch({type:'LOGOUT'});history.push('/');setUser(null);};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;//JWT\nif(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime()){logout();}}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);return/*#__PURE__*/React.createElement(AppBar,{className:classes.appBar,position:\"static\",color:\"inherit\"},/*#__PURE__*/React.createElement(Link,{to:\"/\",className:classes.brandContainer},/*#__PURE__*/React.createElement(Typography,{className:classes.heading,variant:\"h2\",align:\"center\"},\"Berkeley Album\"),/*#__PURE__*/React.createElement(\"img\",{className:classes.image,src:berkeley,alt:\"sight\",height:\"60\"})),/*#__PURE__*/React.createElement(Toolbar,{className:classes.toolbar},(user===null||user===void 0?void 0:user.result)?/*#__PURE__*/React.createElement(\"div\",{className:classes.profile},/*#__PURE__*/React.createElement(Avatar,{className:classes.purple,alt:user===null||user===void 0?void 0:user.result.name,src:user===null||user===void 0?void 0:user.result.imageUrl},user===null||user===void 0?void 0:user.result.name.charAt(0)),/*#__PURE__*/React.createElement(Typography,{className:classes.userName,variant:\"h6\"},user===null||user===void 0?void 0:user.result.name),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",className:classes.logout,color:\"secondary\",onClick:logout},\"Logout\")):/*#__PURE__*/React.createElement(Button,{component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\"},\"Sign In\")));};export default Navbar;","map":{"version":3,"names":["React","useEffect","useState","Link","useHistory","useLocation","AppBar","Avatar","Button","Typography","Toolbar","useStyles","decode","useDispatch","berkeley","Navbar","classes","JSON","parse","localStorage","getItem","user","setUser","dispatch","history","location","logout","type","push","token","decodedToken","exp","Date","getTime","appBar","brandContainer","heading","image","toolbar","result","profile","purple","name","imageUrl","charAt","userName"],"sources":["/Users/wjz8597/OnlineSharedAlbum/client/src/components/Navbar/Navbar.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport {Link, useHistory, useLocation} from 'react-router-dom';\nimport {AppBar, Avatar, Button, Typography, Toolbar} from '@material-ui/core';\nimport useStyles from './styles.js';\nimport decode from 'jwt-decode';\nimport { useDispatch } from 'react-redux';\nimport  berkeley from '../../images/memories.png';\nconst Navbar = () => {\n    const classes = useStyles();\n    const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const location = useLocation();\n    const logout = () => {\n        dispatch({type:'LOGOUT'});\n        history.push('/');\n        setUser(null);\n    }\n    useEffect(() => {\n        const token = user?.token;\n        //JWT\n        if (token) {\n            const decodedToken = decode(token);\n            if (decodedToken.exp * 1000 < new Date().getTime()) {\n                logout();\n            }\n        }\n        setUser(JSON.parse(localStorage.getItem('profile')));\n    }, [location]);\n    return (\n    <AppBar className={classes.appBar} position=\"static\" color=\"inherit\">\n        <Link to=\"/\" className={classes.brandContainer}>\n            <Typography className={classes.heading} variant=\"h2\" align=\"center\">\n                Berkeley Album\n            </Typography>\n            <img className={classes.image} src={berkeley} alt=\"sight\" height=\"60\" />\n        </Link>\n        <Toolbar className={classes.toolbar}>\n            {\n                user?.result ? (\n                    <div className={classes.profile}>\n                        <Avatar className={classes.purple} alt={user?.result.name} src={user?.result.imageUrl}>{user?.result.name.charAt(0)}</Avatar>\n                        <Typography className={classes.userName} variant=\"h6\">{user?.result.name}</Typography>\n                        <Button variant=\"contained\" className={classes.logout} color=\"secondary\" onClick={logout}>Logout</Button>\n                    </div>\n                ) : (\n                        <Button component={Link} to=\"/auth\" variant=\"contained\" color=\"primary\">Sign In</Button>\n                )\n            }\n        </Toolbar>\n        \n    </AppBar>);\n};\nexport default Navbar;"],"mappings":"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"},"metadata":{},"sourceType":"module"}